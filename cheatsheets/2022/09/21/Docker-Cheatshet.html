<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Docker Cheatsheet | readme.bp - Caye’s blog</title>
<meta name="generator" content="Jekyll v3.8.7" />
<meta property="og:title" content="Docker Cheatsheet" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Introducción Imagen: como concepto básico haciendo referencia a la virtualizacion de sistemas, se puede entender como el sistema operativo o distribución que se utilizara. Solo que nos permite ir más allá, dándonos la posibilidad de utilizar “sistemas operativos” diseñados para ejecutar un proyecto especifico. Por ejemplo, existe una imagen del sistema operativo alpine (alpine:&lt;version&gt;), pero a su vez tambien existe la imagen de alpine diseñada para trabajar con node(node:&lt;version&gt;-alpine) Contenedor: paquete portable de imagenes que contienen uno o varios proyectos." />
<meta property="og:description" content="Introducción Imagen: como concepto básico haciendo referencia a la virtualizacion de sistemas, se puede entender como el sistema operativo o distribución que se utilizara. Solo que nos permite ir más allá, dándonos la posibilidad de utilizar “sistemas operativos” diseñados para ejecutar un proyecto especifico. Por ejemplo, existe una imagen del sistema operativo alpine (alpine:&lt;version&gt;), pero a su vez tambien existe la imagen de alpine diseñada para trabajar con node(node:&lt;version&gt;-alpine) Contenedor: paquete portable de imagenes que contienen uno o varios proyectos." />
<link rel="canonical" href="blog.iamcaye.com/cheatsheets/2022/09/21/Docker-Cheatshet.html" />
<meta property="og:url" content="blog.iamcaye.com/cheatsheets/2022/09/21/Docker-Cheatshet.html" />
<meta property="og:site_name" content="readme.bp - Caye’s blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2022-09-21T00:00:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Docker Cheatsheet" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-09-21T00:00:00+00:00","datePublished":"2022-09-21T00:00:00+00:00","description":"Introducción Imagen: como concepto básico haciendo referencia a la virtualizacion de sistemas, se puede entender como el sistema operativo o distribución que se utilizara. Solo que nos permite ir más allá, dándonos la posibilidad de utilizar “sistemas operativos” diseñados para ejecutar un proyecto especifico. Por ejemplo, existe una imagen del sistema operativo alpine (alpine:&lt;version&gt;), pero a su vez tambien existe la imagen de alpine diseñada para trabajar con node(node:&lt;version&gt;-alpine) Contenedor: paquete portable de imagenes que contienen uno o varios proyectos.","headline":"Docker Cheatsheet","mainEntityOfPage":{"@type":"WebPage","@id":"blog.iamcaye.com/cheatsheets/2022/09/21/Docker-Cheatshet.html"},"url":"blog.iamcaye.com/cheatsheets/2022/09/21/Docker-Cheatshet.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="blog.iamcaye.com/feed.xml" title="readme.bp - Caye's blog" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">readme.bp - Caye&#39;s blog</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a><a class="page-link" href="/categories/">Categories</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Docker Cheatsheet</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2022-09-21T00:00:00+00:00" itemprop="datePublished">Sep 21, 2022
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <h2 id="introducción">Introducción</h2>
<ul>
  <li><strong>Imagen:</strong> como concepto básico haciendo referencia a la virtualizacion de sistemas, se puede entender como el sistema operativo o distribución que se utilizara. Solo que nos permite ir más allá, dándonos la posibilidad de utilizar <em>“sistemas operativos”</em> diseñados para ejecutar un proyecto especifico. Por ejemplo, existe una imagen del sistema operativo <code class="highlighter-rouge">alpine (alpine:&lt;version&gt;)</code>, pero a su vez tambien existe la imagen de alpine diseñada para trabajar con node<code class="highlighter-rouge">(node:&lt;version&gt;-alpine)</code>
<br />
<br /></li>
  <li><strong>Contenedor:</strong> paquete portable de imagenes que contienen uno o varios proyectos.</li>
</ul>

<h2 id="comandos">Comandos</h2>
<ul>
  <li>Listado de imagenes descargas
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker images
</code></pre></div>    </div>
  </li>
  <li>Descargar una imagen
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker pull &lt;imagen&gt;:&lt;version&gt;
</code></pre></div>    </div>
  </li>
  <li>Crear un contenedor:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker create <span class="nt">--name</span> &lt;name&gt; &lt;imagen&gt;
</code></pre></div>    </div>
    <p>Devuele el id del contenedor creado</p>
  </li>
  <li>Iniciar un contenedor
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker start &lt;container&gt;
</code></pre></div>    </div>
  </li>
  <li>Parar un contenedor
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker stop &lt;container&gt;
</code></pre></div>    </div>
  </li>
  <li>Listado de containers corriendo actualmente
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker ps
</code></pre></div>    </div>
  </li>
  <li>Listado de containers creados
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker ps <span class="nt">-a</span>
</code></pre></div>    </div>
  </li>
  <li>Eliminar un continer
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker <span class="nb">rm</span> &lt;container&gt;
</code></pre></div>    </div>
  </li>
  <li>Port mapping
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker create <span class="nt">-p</span>&lt;puerto-local&gt;:&lt;puerto-docker&gt; <span class="nt">--name</span> &lt;name&gt; &lt;imagen&gt;
</code></pre></div>    </div>
  </li>
  <li>Mostrar logs del contenedor
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker logs <span class="nt">--follow</span> &lt;container&gt; 
</code></pre></div>    </div>
  </li>
  <li>PULL + CREATE + START
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run <span class="nt">--name</span> &lt;name&gt; <span class="nt">-p</span>&lt;puerto&gt;:&lt;puerto-docker&gt; <span class="nt">-d</span> &lt;imagen&gt;
</code></pre></div>    </div>
  </li>
</ul>

<h2 id="dockerfile">Dockerfile</h2>
<p>Se usa para especificar las acciones que realizara el container al hacer una build</p>
<ul>
  <li>Ejemplo básico con node</li>
</ul>

<div class="language-Dockerfile highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">FROM</span><span class="s"> node:18 // &lt;imagen&gt;:&lt;version&gt;</span>

<span class="k">RUN </span><span class="nb">mkdir</span> <span class="nt">-p</span> /home/app // crea la carpeta dentro del docker donde vamos a alojar la app
<span class="k">COPY</span><span class="s"> . /home/app // copiamos el proyecto dentro de la carpeta que hemos creado</span>

<span class="k">EXPOSE</span><span class="s"> 3000  // puerto que se va exponer dentro del container</span>
<span class="k">CMD</span><span class="s"> ["node", "/home/app/index.js"]</span>
</code></pre></div></div>
<ul>
  <li>Para hacer una build de una imagen
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker build <span class="nt">-t</span> &lt;nombre&gt;:&lt;version&gt;
</code></pre></div>    </div>
  </li>
</ul>

<p>Listado de imagenes: <a href="https://hub.docker.com/search?q=" target="noopener">Docker Hub</a></p>

<h1 id="conexion-entre-contenedores">Conexion entre contenedores</h1>
<ul>
  <li>Para listar todas las redes
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker network <span class="nb">ls</span>
</code></pre></div>    </div>
  </li>
  <li>Para crear una red nueva
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker network create &lt;name&gt;
</code></pre></div>    </div>
  </li>
  <li>Para configurar conexiones entre imagenes dentro de un mismo contenedor la red existente se llama igual que el controlador</li>
  <li>Si quieres especificar una red especifica añade la flag –network <red></red></li>
</ul>

<h2 id="docker-compose">DOCKER COMPOSE</h2>
<p>Es una herramienta de docker para hacer todo lo anterior mucho más facil y automatizando pasos. Para ello debemos crear el fichero docker-compose.yaml.
Ejemplo de archivo docker-compose.yml con un proyecto de node y mongo:</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">version</span><span class="pi">:</span> <span class="s2">"</span><span class="s">3.9"</span>
<span class="na">services</span><span class="pi">:</span> <span class="c1"># aqui especificamos las imagenes que se incluiran en nuestra build</span>
  <span class="na">node_proyect</span><span class="pi">:</span>
    <span class="na">build</span><span class="pi">:</span> <span class="s">.</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s2">"</span><span class="s">3000:3000"</span> 
    <span class="na">links</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">monguito</span>
  <span class="na">mongodb</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">mongo</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s2">"</span><span class="s">27017:27017"</span>
    <span class="na">environment</span><span class="pi">:</span>
      <span class="c1"># env params</span>
    <span class="na">volumes</span><span class="pi">:</span> <span class="c1"># este parametro es importante para no perder datos cada vez que se hace una build</span>
      <span class="pi">-</span> <span class="s">mongo-data:/data/db</span>
<span class="na">volumes</span><span class="pi">:</span>
  <span class="na">mongo-data</span><span class="pi">:</span>
    
</code></pre></div></div>

<p>Una vez tenemos configurado este archivo, ejecutando <code class="highlighter-rouge">docker compose up</code> se creara un container para cada proyecto con su propia red.</p>

<h1 id="environments">Environments</h1>
<p>Podemos tener diferentes entornos (prod, dev) creando diferentes Dockerfiles: <br />
Ejemplo Dockerfile.dev para proyecto con node</p>
<div class="language-Dockerfile highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">FROM</span><span class="s"> node:18 // &lt;imagen&gt;:&lt;version&gt;</span>

<span class="k">RUN </span>npm i <span class="nt">-g</span> nodemon
<span class="k">RUN </span><span class="nb">mkdir</span> <span class="nt">-p</span> /home/app // crea la carpeta dentro del docker donde vamos a alojar la app

<span class="k">WORKDIR</span><span class="s"> /home/app</span>

<span class="k">EXPOSE</span><span class="s"> 3000  // puerto que se va exponer dentro del container</span>

<span class="k">CMD</span><span class="s"> ["nodemon", "index.js"]</span>
</code></pre></div></div>

<p>Será necesario añadir un nuevo archivo de docker-compose (docker-compose-dev.yml)</p>
<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">version</span><span class="pi">:</span> <span class="s2">"</span><span class="s">3.9"</span>
<span class="na">services</span><span class="pi">:</span> <span class="c1"># aqui especificamos las imagenes que se incluiran en nuestra build</span>
  <span class="na">node_proyect</span><span class="pi">:</span>
    <span class="na">build</span><span class="pi">:</span>
      <span class="na">context</span><span class="pi">:</span> <span class="s">.</span>
      <span class="na">dockerfile</span><span class="pi">:</span> <span class="s">Dockerfile.dev</span> <span class="c1"># con este parametro incluimos un dockerfile especifico</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s2">"</span><span class="s">3000:3000"</span> 
    <span class="na">links</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">monguito</span>
    <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">.:/home/app</span>
  <span class="na">mongodb</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">mongo</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s2">"</span><span class="s">27017:27017"</span>
    <span class="na">environment</span><span class="pi">:</span>
      <span class="c1"># env params</span>
    <span class="na">volumes</span><span class="pi">:</span> <span class="c1"># este parametro es importante para no perder datos cada vez que se hace una build</span>
      <span class="pi">-</span> <span class="s">mongo-data:/data/db</span>
<span class="na">volumes</span><span class="pi">:</span>
  <span class="na">mongo-data</span><span class="pi">:</span>
    
</code></pre></div></div>
<p>Para ejecutar docker compose con un archivo de configuracion especifico podemos usar la flag -f: <code class="highlighter-rouge">docker compose -f docker-compose-dev.yml up</code></p>

<p>Con esta info se puede empezar a cacharrear, ire actualizando conforme vaya descubriendo cosas</p>

  </div><a class="u-url" href="/cheatsheets/2022/09/21/Docker-Cheatshet.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">readme.bp - Caye&#39;s blog</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">readme.bp - Caye&#39;s blog</li><li><a class="u-email" href="mailto:cayetano.biehler@gmail.com">cayetano.biehler@gmail.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/iamcaye"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">iamcaye</span></a></li><li><a href="https://www.twitter.com/cayetanobiehler"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">cayetanobiehler</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>I&#39;ll use this blog to talk about the new things that i&#39;m learning. Right now i&#39;ve just started reading a book about KVM virtualization but i also like hardware and software development. The description is a little bit improvised and not well thought... don&#39;t mind me</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
